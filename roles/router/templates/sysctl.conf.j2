# {{ ansible_managed }}
# Performance tuning for gigabit throughput

{% if router_sysctl_enabled %}
# Increase TCP buffer sizes for high-speed networks
net.core.rmem_max = {{ router_sysctl_rmem_max }}
net.core.wmem_max = {{ router_sysctl_wmem_max }}
net.core.rmem_default = {{ router_sysctl_rmem_default }}
net.core.wmem_default = {{ router_sysctl_wmem_default }}
net.ipv4.tcp_rmem = {{ router_sysctl_tcp_rmem }}
net.ipv4.tcp_wmem = {{ router_sysctl_tcp_wmem }}

# Increase backlog for high packet rates
net.core.netdev_max_backlog = {{ router_sysctl_netdev_max_backlog }}

# Enable MTU probing
net.ipv4.tcp_mtu_probing = {{ router_sysctl_mtu_probing }}
{% endif %}
